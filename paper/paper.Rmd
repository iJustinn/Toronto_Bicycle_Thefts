---
output: html_document
thanks: "Code and data are available at: [https://github.com/iJustinn/Toronto_Bicycle_Thefts/tree/main](https://github.com/iJustinn/Toronto_Bicycle_Thefts/tree/main)."
---


<style>
/* Container for title, subtitle, description, author, and date with background image */
.header-section {
  background-image: url('bikes.jpg'); 
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  padding: 50px;
  color: white;
}

.title {
  font-size: 40px;                   /* Larger font size for the main title */
  font-weight: bold;                 /* Bold font weight for emphasis */
  color: #FFC107;                    /* Yellow color similar to the example */
  text-align: left;                  /* Align text to the left */
  font-family: Georgia, serif;       /* Use Georgia or a similar serif font */
  margin: 0;
  line-height: 1.1;                  /* Tighter line height */
  padding: 10px;                     /* Add padding around text */
  border: 5px solid #FFC107;         /* Border around the title text */
  border-radius: 8px;                /* Rounded corners for a softer look */
  display: inline-block;             /* Keeps the border tight around text */
  text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7); /* Text shadow for emphasis */
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5); /* Optional shadow for depth */
}

.subtitle {
  font-size: 28px;            /* Slightly larger font size for the subtitle */
  font-weight: normal;        /* Normal font weight */
  color: white;               /* White color for the subtitle */
  text-align: left;           /* Align text to the left */
  font-family: 'Times New Roman', Times, serif; /* A serif font for contrast */
  margin-top: 10px;
  line-height: 1.2;           /* Adjust line height for spacing */
  text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7); /* Text shadow for emphasis */
}

.description {
  display: block; /* Makes span act like a block element */
  font-size: 18px;
  font-weight: normal;
  font-style: italic; /* Makes the text italic */
  line-height: 1.6;
  text-align: left;
  max-width: 600px;
  margin-top: 20px;
  font-family: "Times New Roman", Times, serif; /* Change to desired font */
  background-color: transparent !important;
  border: none !important;
  padding: 0 !important;
  box-shadow: none !important;
  text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7); /* Text shadow for emphasis */
}

.author-date {
  font-size: 16px;
  font-weight: normal;
  color: white;
  text-align: left;
  margin-top: 30px;
  font-style: italic;
  text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7); /* Text shadow for emphasis */
}

.main-body {
  max-width: 800px;              /* Set max width for main body */
  width: 100%;                    /* Ensures full width within max-width */
  font-size: 12px;                /* Font size for readability */
  font-weight: 300;               /* Lighter font weight for softer tone */
  color: black;             
  line-height: 1.5;               /* Increase line height for readability */
  text-align: justify;            /* Justified alignment for a clean look */
  margin: 0 auto;                 /* Center content on the page */
  padding: 20px;                  /* Add padding around the text */
  font-family: 'Georgia', serif;  /* Use a classic serif font */
}

.main-body p {
  width: 100%;                    /* Full width within .main-body */
  max-width: none;                /* Remove max-width constraint */
  margin: 0 0 1em 0;              /* Consistent margin below each paragraph */
  padding: 0;                     /* Remove padding */
}


.section-heading {
  max-width: 800px;              /* Limit the width */
  margin: 20px auto 20px auto;   /* Center the heading on the page */
  padding-bottom: 5px;           /* Space below for the underline */
  border-bottom: 2px solid #FFC107; /* Optional yellow underline */
}

.section-title-line1 {
  font-size: 25px;               /* Larger font size for the first line */
  font-weight: bold;             /* Bold weight for emphasis */
  color: #FFC107;                /* Dark yellow color */
  text-align: left;              /* Align text to the left */
  font-family: 'Georgia', serif; /* Serif font */
  display: block;                /* Ensures each line appears separately */
}

.section-title-line2 {
  font-size: 20px;               /* Slightly smaller font for the second line */
  font-weight: normal;           /* Regular weight */
  color: #603601;                /* Dark color for contrast */
  text-align: left;              /* Align text to the left */
  font-family: 'Georgia', serif; /* Serif font */
  display: block;                /* Ensures each line appears separately */
  margin-top: -5px;               /* Adds some spacing between lines */
}

/* Citation section styling */
.citation-section {
  max-width: 800px;
  margin: 30px auto;              /* Center the section */
  padding: 20px;                  /* Add padding around citations */
  background-color: #f9f9f9;      /* Light background for contrast */
  border-left: 5px solid #FFC107; /* Yellow border to match title color */
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
  font-family: 'Georgia', serif;  /* Match main font */
  color: #333;                    /* Dark text color */
}

.citation-section h3 {
  font-size: 20px;                /* Set citation title font size to 20px */
  line-height: 1.5;
  color: #603601;                 /* Darker color for contrast */
  font-weight: bold;
  margin-bottom: 10px;
}

.citation-section ul {
  list-style-type: none;          /* Remove default bullets */
  padding: 0;                     /* Remove default padding */
}

.citation-section li {
  font-size: 12px;                /* Set individual citations to 12px */
  margin-bottom: 10px;            /* Space between each citation */
  line-height: 1.5;               /* Increase line height for readability */
}

.citation-section li a {
  color: #1a73e8;                 /* Link color for readability */
  text-decoration: none;
}

.citation-section li a:hover {
  text-decoration: underline;      /* Underline on hover */
}

</style>

<!-- Header section with background image -->
<div class="header-section">
  <div class="title">Ride at Your Own Risk: Insights into Toronto’s Bicycle Theft Hotspots</div>
  <div class="subtitle">Navigating Toronto’s streets with eyes wide open, this data-driven guide helps cyclists stay ahead of bicycle thieves.</div>
  
  <!-- Using span instead of div for description -->
  <span class="description">
    Each year, countless bikes disappear from Toronto’s streets, leaving cyclists frustrated and vulnerable. Our analysis digs into patterns and insights across the city, highlighting where and when bicycles are most at risk. With data spanning over a decade, we reveal theft hotspots and provide tips to help keep your bike safe.
  </span>
  
  <div class="author-date">Yingke He, Ziheng Zhong<br>November 12, 2024</div>
</div>


<!-- Main article content without background image -->
<div class="main-body">
  <p>Imagine locking up your bike on a bustling Toronto street, feeling reassured that a strong lock and some common sense will keep it safe. But what if certain seasons, specific bike types, or even certain neighborhoods increase your risk of theft far more than you realize? For many cyclists, bike theft has moved from a distant possibility to an everyday concern, with data revealing just how pervasive the risk can be in Toronto.</p>

  <p>In this analysis, we dig into over a decade’s worth of data from the <a href="https://data.torontopolice.on.ca/datasets/TorontoPS::bicycle-thefts-open-data/about" target="_blank" style="color: #FFC107; text-decoration: underline;">Toronto Police Service</a> (Toronto Police Service, 2024c) to answer key questions: When are bikes at the greatest risk? What makes a bike more likely to be targeted? And where are the theft hotspots cyclists should avoid? Each section of our article addresses a different angle of bike theft in Toronto, from seasonal and weekly theft patterns to variations by bicycle type and value, to pinpointing the city’s most high-risk locations.</p>

  <p>Over the past decade, <strong style="color: #FFC107;">32,489</strong> bike thefts have been reported in Toronto, yet only <strong style="color: #FFC107;">422</strong> of these stolen bikes were successfully recovered. With these insights, we aim to empower cyclists with knowledge that can help them safeguard their bikes and inform Cycle Toronto and local authorities about the areas most in need of intervention. Read on as we trace theft trends over the years, reveal the high-risk locations, and provide practical advice to help protect your bike.</p>
</div>


```{r, include = FALSE, warning = FALSE, message = FALSE}
knitr::opts_chunk$set(echo = FALSE, include=TRUE, eval=TRUE)

required_packages <- c("sf", "here", "dplyr", "readr", "purrr", "scales", "plotly", "ggplot2", "leaflet", "osmdata", 
                       "ggridges", "cowplot", "lubridate", "tidyverse", "crosstalk", "bookdown", "hrbrthemes", "gganimate")

for (p in required_packages) {
  if (!require(p, character.only = TRUE)) {
    install.packages(p, character.only = TRUE)
  }
}

library(sf)
library(here)
library(dplyr)
library(readr)
library(purrr)
library(scales)
library(plotly)
library(ggplot2)
library(leaflet)
library(osmdata)
library(cowplot)
library(ggridges)
library(bookdown)
library(lubridate)
library(tidyverse)
library(crosstalk)
library(gganimate)
library(hrbrthemes)
library(htmltools)
```

<div class="section-heading">
  <span class="section-title-line1">When Are Bikes at the Greatest Risk?</span><br>
  <span class="section-title-line2">A Look at Seasonal and Weekly Patterns</span>
</div>

<center>
```{r interactive_weekly_plot, echo=FALSE, message=FALSE, warning=FALSE, results='asis', fig.width=8, fig.height=3.5}

# Load the data
data <- read_csv(here("data", "Theft_Counts_By_Day.csv"), show_col_types = FALSE)

# Arrange data by day of the week (Monday to Sunday) and convert OCC_DOW to a factor with specified levels
data <- data %>%
  mutate(OCC_DOW = factor(OCC_DOW, levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))) %>%
  arrange(OCC_DOW)

# Initialize plot with a line trace for the entire data
fig <- plot_ly(data, x = ~OCC_DOW, y = ~Number_of_Thefts, type = 'scatter', mode = 'lines+markers',
               line = list(color = '#05595B'), marker = list(color = '#603601', size = 10))

# Add points for each day with initial visibility settings
for (i in 1:nrow(data)) {
  fig <- fig %>%
    add_trace(
      x = data$OCC_DOW[i],
      y = data$Number_of_Thefts[i],
      type = 'scatter',
      mode = 'markers+text',
      text = paste("Thefts:", data$Number_of_Thefts[i]),
      textposition = "top center",
      marker = list(color = "#FFC107", size = 15),
      showlegend = FALSE,
      visible = ifelse(i == 1, TRUE, FALSE)
    )
}

# Define steps for each day in the slider
steps <- lapply(1:nrow(data), function(i) {
  step <- list(
    method = "restyle",
    args = list("visible", as.list(rep(FALSE, nrow(data) + 1))),  # +1 to include the main line trace
    label = data$OCC_DOW[i]
  )
  step$args[[2]][i + 1] <- TRUE  # Make only the current day’s point visible (offset by 1 due to main line trace)
  step$args[[2]][1] <- TRUE       # Keep the main line trace visible
  return(step)
})

# Add layout with the slider, title annotation in the top-left, and set background colors
fig <- fig %>%
  layout(
    xaxis = list(title = ""),
    yaxis = list(title = "Number of Thefts"),
    sliders = list(
      list(
        active = 0,
        currentvalue = list(prefix = "Day: "),
        steps = steps
      )
    ),
    plot_bgcolor = "#faecd5",     # Set background color for the plotting area
    paper_bgcolor = "#faecd5",     # Set background color for the entire plot
    annotations = list(
      list(
        x = 0.01, y = 1.05,  # Position in normalized coordinates (0 = left, 1 = top)
        xref = "paper", yref = "paper",
        text = "Weekly Bicycle Theft Patterns in Toronto",  # Title text
        showarrow = FALSE,
        font = list(size = 11, color = "#603601")  # Set title color to #603601
      )
    )
  )

# Display the plot
fig

``` 
</center>
<div style="color: grey; font-size: 12px; margin-top: 3px; max-width: 800px; margin: 0 auto;">
  Note: Dragging the slider reveals daily bike theft patterns in Toronto, highlighting higher-risk days, with data covering 2014 to mid-2024.
</div> \ 

<div class="main-body">
  <p> The Weekly Bicycle Theft Patterns in Toronto plot revealed that thefts are not evenly distributed throughout the week. The data shows a peak on Fridays, with over <strong style="color: #FFC107;">4,900</strong> reported thefts, followed by a decline on Saturday and Sunday. This trend may reflect how people use their bikes during the week versus the weekend. Fridays might represent a combination of commuter bike usage and weekend planning, where people may leave their bikes in high-traffic or less secure areas, making them more vulnerable to theft.</p>

<p>This insight could be valuable for both cyclists and advocacy groups like <a href="https://www.cycleto.ca/" target="_blank" style="color: #FFC107; text-decoration: underline;">Cycle Toronto</a> (Cycle Toronto, 2021). Understanding that Friday is a peak day for thefts, local authorities could consider increasing surveillance or public awareness efforts on this day, especially in known hotspot areas. Additionally, for cyclists, it suggests that extra caution on Fridays could reduce the risk of theft. The data here underscores the importance of timing in bike theft prevention, showing how risks fluctuate within the week, which may reflect broader social and behavioral patterns around work and leisure in Toronto.</p>\ 
</div>

<center>
```{r mothly_plot, include = TRUE,fig.cap = "Bike theft and recovery patterns in Toronto from 2014 to 2024", warning = FALSE, message = FALSE, fig.width=8, fig.height=4.3}

# Load your data
data <- read_csv(here("data", "Theft_and_Found_Counts_By_Month_2014_2024.csv"), show_col_types = FALSE)

# Convert month names to month numbers for ordering
data <- data %>%
  mutate(OCC_MONTH_NUM = factor(OCC_MONTH, levels = month.name))

# Specify levels for OCC_YEAR to order from 2014 to 2024
data$OCC_YEAR <- factor(data$OCC_YEAR, levels = 2014:2024)

# Calculate a scaled height for "Found" data by dividing by the maximum "Found" value
max_found <- max(data$Found, na.rm = TRUE)
max_stolen <- max(data$Stolen, na.rm = TRUE)

# Calculate yearly totals for annotation
yearly_totals <- data %>%
  group_by(OCC_YEAR) %>%
  summarise(Found_Total = sum(Found, na.rm = TRUE), Stolen_Total = sum(Stolen, na.rm = TRUE))

# Plot for Bikes Found with scaled heights and yearly total annotations
plot_found <- ggplot(data, aes(x = OCC_MONTH_NUM, y = OCC_YEAR, 
                               height = (Found / max_found) * 4, group = OCC_YEAR)) +
  geom_ridgeline(
    fill = "#05595B", color = "white", alpha = 0.5, scale = 1, linewidth = 0
  ) +
  labs(y = "", x = NULL) +  # Remove x-axis title
  theme_minimal() +
  theme(
    axis.ticks.y = element_blank(),
    axis.text.y = element_text(size = 12),
    axis.text.x = element_text(size = 12, angle = 45, hjust = 1),
    panel.grid.major.x = element_blank(),
    panel.grid.minor.x = element_blank(),
    panel.grid.major.y = element_line(size = 0.5),
    panel.border = element_blank(),
    plot.title = element_text(size = 13, color = "#05595B", hjust = -0.1, vjust = 1.5),  # Smaller title
    panel.background = element_rect(fill = "#faecd5", color = NA),  # Light blue background for plot area
    plot.background = element_rect(fill = "#faecd5", color = NA)    # Light blue background for overall plot
  ) +
  scale_x_discrete(labels = month.abb) +
  ggtitle("Bikes Found") +  # Add title for Bikes Found
  geom_text(data = yearly_totals, aes(x = 12, y = OCC_YEAR, label = Found_Total), 
            color = "#05595B", hjust = 1, size = 3, inherit.aes = FALSE)

# Plot for Bikes Stolen with scaled heights, no borders, and yearly total annotations
plot_stolen <- ggplot(data, aes(x = OCC_MONTH_NUM, y = OCC_YEAR, 
                                height = (Stolen / max_stolen) * 4, group = OCC_YEAR)) +
  geom_ridgeline(
    fill = "#603601", color = "white", alpha = 0.5, scale = 1, linewidth = 0
  ) +
  labs(y = "", x = NULL) +  # Remove x-axis title
  theme_minimal() +
  theme(
    axis.ticks.y = element_blank(),
    axis.text.y = element_text(size = 12),
    axis.text.x = element_text(size = 12, angle = 45, hjust = 1),
    panel.grid.major.x = element_blank(),
    panel.grid.minor.x = element_blank(),
    panel.grid.major.y = element_line(size = 0.5),
    panel.border = element_blank(),
    panel.background = element_rect(fill = "#faecd5", color = NA),  # Light blue background for plot area
    plot.background = element_rect(fill = "#faecd5", color = NA),   # Light blue background for overall plot
    plot.title = element_text(size = 13, color = "#603601", hjust = -0.1, vjust = 1.5)  # Smaller title
  ) +
  scale_x_discrete(labels = month.abb) +
  ggtitle("Bikes Stolen") +  # Add title for Bikes Stolen
  geom_text(data = yearly_totals, aes(x = 12, y = OCC_YEAR, label = Stolen_Total), 
            color = "#603601", hjust = 1, size = 3, inherit.aes = FALSE)

# Combine the plots side by side
combined_plot <- plot_grid(plot_found, plot_stolen, nrow = 1)

# Display the combined plot
combined_plot

```
</center>
\ 

<div class="main-body">
  <p>The visualization of bike theft and recovery patterns in Toronto using data from 2014 to mid 2024 above reveals a distinct seasonality, with thefts peaking during the warmer months from May to August. This trend likely correlates with <a href="https://www.toronto.ca/wp-content/uploads/2021/04/8f76-2019-Cycling-Public-Option-Survey-City-of-Toronto-Cycling.pdf" target="_blank" style="color: #FFC107; text-decoration: underline;">increase</a> (City of Toronto, 2019) cycling activity during the summer, when more people choose biking as a primary mode of transportation or recreation. Events like <a href="https://www.bikemonth.ca/toronto" target="_blank" style="color: #FFC107; text-decoration: underline;">Bike Month</a> (Bike Month, 2024) in June, which includes initiatives encouraging cycling, leading to higher exposure of bikes, making them easier targets for theft.</p>

<p>In contrast, the left side of the plot illustrates the number of bikes found each month, which remains consistently low across the years. The low recovery rate highlights systemic issues in bike recovery efforts. Despite <a href="https://www.tps.ca/services/bicycle-registration/" target="_blank" style="color: #FFC107; text-decoration: underline;">city-wide bike registry programs</a> (Toronto Police Service, 2024a) and <a href="https://www.tps.ca/crime-prevention/bicycle-safety-and-theft-prevention/" target="_blank" style="color: #FFC107; text-decoration: underline;">police campaigns</a> (Toronto Police Service, 2024b) aimed at educating cyclists about secure parking and locking techniques, the ratio of bikes recovered to those stolen has remained low. In recent years, Toronto has initiated <a href="https://www.toronto.ca/services-payments/streets-parking-transportation/cycling-in-toronto/bicycle-parking/" style="color: #FFC107; text-decoration: underline;">programs</a> (City of Toronto, 2024) to improve bike parking infrastructure and introduced more secure lock stands in high-theft areas, but these measures appear insufficient given the scale of theft illustrated in this data.</p>
</div>

<div class="section-heading">
  <span class="section-title-line1">What Makes a Bike a Target?</span><br>
  <span class="section-title-line2">Analyzing Theft by Bicycle Type and Value</span>
</div>

<center>
```{r, echo=FALSE, message=FALSE, warning=FALSE, results='asis', fig.width=7, fig.height=4}


# Load the cleaned dataset
bike_type_counts <- read_csv(here("data", "bike_type_counts.csv"))

# Mapping bike type codes to descriptive names
bike_type_names <- c(
  "Others" = "Other Types",
  "MT" = "Mountain",
  "RG" = "Gravel",
  "OT" = "Other",
  "RC" = "Recreational & Commuting",
  "EL" = "Electric"
)

# Calculate percentages for each bike type
bike_type_counts <- bike_type_counts %>%
  mutate(total = sum(bike_num)) %>%
  group_by(bike_type) %>%
  mutate(percentage = (bike_num / total) * 100)

# Summarize types with less than 5% as "Others"
bike_type_counts <- bike_type_counts %>%
  mutate(bike_type = ifelse(percentage < 5, "Others", bike_type)) %>%
  group_by(bike_type) %>%
  summarise(bike_num = sum(bike_num), percentage = sum(percentage)) %>%
  ungroup()

# Reorder bike types by percentage in descending order
bike_type_counts <- bike_type_counts %>%
  mutate(bike_type = fct_reorder(bike_type, -percentage))

# Create a horizontal stacked bar chart
ggplot(bike_type_counts, aes(x = factor(1), y = percentage, fill = bike_type)) +
  geom_bar(stat = "identity", position = "fill") +
  geom_text(aes(label = paste0(round(percentage, 1), "%")), 
            position = position_fill(vjust = 0.5), size = 3) +
  scale_y_continuous(labels = percent_format()) +
  labs(
    title = "Distribution of Bike Types",
    x = "Bike Types",
    y = "Percentage",
    fill = "Bike Types"
  ) +
  scale_fill_manual(labels = bike_type_names, values = c("#FF7043", "#FF8F00", "#FFA726", "#FFB300", "#FFC107", "#FFCA28")) +
  coord_flip() +
  theme_minimal() +
  theme(axis.text.x = element_blank(),
        axis.ticks.x = element_blank(),
        legend.position = "right")

```
</center>

<div class="main-body">
  <p>The first plot illustrates the distribution of stolen bike types in Toronto, highlighting which kinds are more frequently targeted. Mountain bikes and recreational & commuting bikes make up the largest portions, at <strong style="color: #FFC107;">31%</strong> and <strong style="color: #FFC107;">27.4%</strong> respectively, reflecting their popularity among Toronto cyclists for both daily commuting and recreational use. Their common use likely makes them more visible and accessible, increasing the risk of theft. Electric bikes, by contrast, are less frequently stolen, accounting for only <strong style="color: #FFC107;">7.8%</strong>, which may reflect the added security measures often used by owners of higher-value bikes.</p>

<center>
```{r, echo=FALSE, message=FALSE, warning=FALSE, results='asis', fig.width=7, fig.height=4}


# Load data
bike_cost_counts <- read_csv(here("data", "bike_cost_counts.csv"))

# Create a pie chart of bike cost tiers
ggplot(bike_cost_counts, aes(x = "", y = bike_num, fill = cost_tier)) +
  geom_bar(width = 1, stat = "identity") +
  coord_polar("y") +
  labs(
    title = "Proportion of Bike Cost Tiers",
    fill = "Cost Tier"
  ) +
  scale_fill_manual(values = c("#FFCA28", "#FFC107", "#FFB300", "#FF8F00")) +  # Customize colors
  theme_minimal() +
  theme(
    axis.title.x = element_blank(),
    axis.title.y = element_blank(),
    axis.text = element_blank(),
    panel.grid = element_blank(),
    plot.title = element_text(hjust = 0.5)
  ) +
  geom_text(aes(label = paste0(round(bike_num / sum(bike_num) * 100, 1), "%")),
            position = position_stack(vjust = 0.5))

```
</center>

<p>The second plot examines bike theft by cost tier, showing that bikes in the lower price ranges (under \$500 and \$500-\$999) are the most commonly stolen, at <strong style="color: #FFC107;">34.9%</strong> and <strong style="color: #FFC107;">31.7%</strong> respectively. These lower-cost bikes are often used for daily commuting in Toronto, left in public spaces where they are more vulnerable. Interestingly, higher-value bikes (\$1000-\$1999 and above \$2000) also face theft risk, comprising <strong style="color: #FFC107;">20.9%</strong> and <strong style="color: #FFC107;">12.4%</strong> of thefts. This suggests that while thieves frequently target accessible, lower-value bikes, higher-cost bikes are still vulnerable, especially in busy urban areas where security can vary.</p>

<p>These data highlight that all Toronto cyclists, regardless of their bike's value, should implement strong security measures. For lower-cost bikes commonly used for commuting, investing in a high-quality U-lock or chain lock is essential, as these bikes are frequently targeted due to their accessibility. Parking in high-traffic areas with security cameras, like those near busy shops or designated bike racks, can help prevent opportunistic theft. Even for a lower-value bike, taking these extra precautions can make a significant difference in reducing theft risk.</p>

<p>Higher-value bikes, while less commonly stolen, still attract attention and may require even more advanced protection. Cyclists with more expensive bikes should consider using two different types of locks, such as a U-lock paired with a cable lock, and avoid leaving their bikes outside overnight. Indoor storage options, when available, provide the highest level of security (Toronto Police Service, 2024b). Additionally, registering bikes with Toronto’s bike registry or Project 529 can improve the chances of recovery if theft occurs (Toronto Police Service, 2024b; Project 529, 2024). By marking bikes with unique identifiers and varying parking locations regularly, cyclists can make their bikes less predictable targets and better protect them from theft in Toronto.</p>
</div>

<div class="section-heading">
  <span class="section-title-line1">A Decade of Disappearing Bikes:</span><br>
  <span class="section-title-line2"> Tracing Theft Trends Over Ten Years</span>
</div>

<center>
```{r animated_bar_plot, echo=FALSE, message=FALSE, warning=FALSE, results='asis', fig.width=4, fig.height=2}

# Load the data
data <- read_csv(here("data", "Stolen_Found_Counts.csv"), show_col_types = FALSE)

# Rename categories for clarity
data <- data %>%
  mutate(Offence_Category = case_when(
    Offence_Category == "THEFT" ~ "Bikes Stolen",
    Offence_Category == "FOUND" ~ "Bikes Found",
    TRUE ~ Offence_Category
  ))

# Set the number of frames for the animation
max_frames <- 100  # Total number of frames for smooth animation

# Generate interpolated data for simultaneous increase
animated_data <- data %>%
  # Repeat each category for each frame
  group_by(Offence_Category) %>%
  do(data.frame(
    Offence_Category = .$Offence_Category,
    Number_of_Offences = seq(0, .$Number_of_Offences, length.out = max_frames),
    frame = 1:max_frames
  ))

# Ensure Offence_Category is a factor for proper ordering
animated_data$Offence_Category <- factor(animated_data$Offence_Category, levels = c("Bikes Found", "Other", "Bikes Stolen"))

# Define custom colors for each category
custom_colors <- c("Bikes Stolen" = "#603601", "Bikes Found" = "#4682B4", "Other" = "#eedaaf")

# Create the animated bar plot with the x-axis label at the bottom right
ggplot(animated_data, aes(x = Offence_Category, y = Number_of_Offences, fill = Offence_Category)) + 
  geom_bar(stat = 'identity') +
  theme_minimal() +
  labs(x = 'Offense Category', y = 'Number of Offences') +
  
  # Apply custom colors
  scale_fill_manual(values = custom_colors) +
  
  # Remove the legend title
  guides(fill = guide_legend(title = NULL)) +
  
  # Set background colors and adjust text positioning, placing the x-axis label at the bottom right
  theme(
    panel.background = element_rect(fill = "#faecd5", color = NA),
    plot.background = element_rect(fill = "#faecd5", color = NA),
    axis.text.x = element_text(size = 6),
    axis.text.y = element_text(size = 6),
    axis.title.x = element_text(size = 6, hjust = 1, vjust = -1),  # Position x-axis label at the bottom right
    axis.title.y = element_text(size = 6),
    legend.text = element_text(size = 4)
  ) +
  
  # gganimate specific settings for smooth transition
  transition_states(
    frame,
    transition_length = 2,
    state_length = 1
  ) +
  ease_aes('linear')  # Ensures a smooth, even increase

```
</center>

<div style="color: grey; font-size: 12px; margin-top: 3px; max-width: 800px; margin: 0 auto;">
  Displays the count of various bicycle-related offences reported to the Toronto Police Service, highlighting categories such as stolen, found, and other incidents. The smooth increase in bar heights emphasizes the scale of each offence type, offering insights into the distribution and relative frequency of these incidents from 2014 to 2024.
</div> \ 

<div class="main-body">
  <p>The tallest bar, representing "Bikes Stolen," towers above the others with over <strong style="color: #FFC107;">32,000</strong> reported incidents, emphasizing how prevalent bike theft has become across the city of Toronto. <a href="https://www.ctvnews.ca/canada/should-toronto-tear-up-its-bike-lanes-to-improve-traffic-flow-critics-say-it-s-not-so-simple-1.7103768" style="color: #FFC107; text-decoration: underline;">CTV news</a> (CTV News, 2024) have highlighted hotspots, including downtown Toronto and areas near major transit hubs, where cyclists frequently leave bikes unattended. In response, The Toronto Police Service (TPS) has introduced <a href="https://www.tps.ca/media-centre/news-releases/fix-title-project-sentry/" style="color: #FFC107; text-decoration: underline;">Project Sentry</a> (Toronto Police Service, 2024d), an initiative led by officers in 14 Division aimed at recovering stolen bicycles and reuniting them with their rightful owners across the city. This program is part of TPS’s effort to address the high rates of bike theft and improve recovery outcomes for Toronto cyclists. </p>

 <p>In contrast, the "Bikes Found" bar, with only <strong style="color: #FFC107;">422</strong> cases, reveals a deep gap in recovery efforts. The small size of this bar underscores how difficult it is to retrieve stolen bikes and reunite them with their owners, suggesting a systemic issue in tracking and identifying stolen bicycles. Although Toronto has introduced <a href="https://project529.com/garage" style="color: #FFC107; text-decoration: underline;">Project 529</a> (Project 529, 2024) to help track ownership, recovery rates remain low, partly due to limited resources and the challenge of identifying recovered bikes that may have been altered or resold. </p> 

 <p>The "Other" category, with around <strong style="color: #FFC107;">3,200</strong> cases, includes incidents such as attempted thefts, damage to bikes, mischief, and other related offenses. This category highlights a broader issue affecting bike security, indicating that many cyclists encounter safety challenges even when their bikes aren’t ultimately stolen. </p>
</div>

<center>
```{r animated_line_plot, echo=FALSE, message=FALSE, warning=FALSE, results='asis', fig.width=4.2, fig.height=2.6}

# Load your data
data <- read_csv(here("data", "Bicycle_Theft_Monthly_Counts.csv"), show_col_types = FALSE)

# Create a numeric month order variable
data <- data %>%
  mutate(
    OCC_MONTH_NUM = match(OCC_MONTH, c("January", "February", "March", "April", "May", 
                                       "June", "July", "August", "September", "October", 
                                       "November", "December"))
  )

# Create the animated plot with smaller text elements
plot <- data %>%
  ggplot(aes(x = OCC_MONTH_NUM, y = Number_of_Thefts, group = as.factor(OCC_YEAR), color = as.factor(OCC_YEAR))) +
  geom_line() +
  geom_point() +
  scale_color_viridis_d() +
  ylab("Number of Bikes Stolen") +
  xlab("Month") +
  scale_x_continuous(breaks = 1:12, labels = c("January", "February", "March", "April", "May", "June", 
                                               "July", "August", "September", "October", "November", "December")) +
  theme_ipsum() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1, size = 7),
    axis.text.y = element_text(size = 8),
    axis.title.x = element_text(size = 10),
    axis.title.y = element_text(size = 10),
    legend.title = element_text(size = 8),
    legend.text = element_text(size = 6),
    panel.background = element_rect(fill = "#faecd5", color = NA),
    plot.background = element_rect(fill = "#faecd5", color = NA)
  ) +
  transition_reveal(OCC_MONTH_NUM) +
  labs(color = "Year")

# Render the animation
animate(plot, nframes = 100, fps = 10)

```
</center>

<div style="color: grey; font-size: 12px; margin-top: 3px; max-width: 800px; margin: 0 auto;">
 Visualizes the monthly count of bicycle thefts reported to the Toronto Police Service from 2014 to June 2024. The animation reveals seasonal patterns and variations across different years, providing insights into peak months and potential trends over time.
</div>

<div class="main-body">
  <p>The animated line plot illustrates the monthly patterns of bicycle thefts in Toronto from 2014 to mid-2024, revealing a clear seasonal trend. Each year, bike thefts rise steadily in the spring, peak during the summer months of June and July, and then decline in the fall and winter when cycling activity decreases. This predictable pattern aligns with Toronto's warmer months when more residents choose biking as their primary mode of transportation or recreation, leading to increased exposure of bikes in public spaces. These high-theft months underline the need for heightened security measures and awareness among cyclists, particularly during summer.</p>

<p>The year 2020, however, deviates from this regular trend due to the impact of the COVID-19 pandemic. As public transit options were considered risky, many Torontonians turned to bicycles as a safer and more flexible transportation option, resulting in a rise in bike ownership and driving up theft rates (Shapiro, 2021). Additionally, the pandemic stretched police resources, potentially limiting routine patrols and recovery efforts. The 2020 increase highlights how external factors, such as a public health crisis, can exacerbate bike theft trends and points to the importance of adaptable theft prevention strategies in response to changing urban transportation needs.</p>
</div>

<div class="section-heading">
  <span class="section-title-line1">Mapping the Danger Zones:</span><br>
  <span class="section-title-line2"> High-Risk Locations Across Toronto</span>
</div>

<div class="main-body">
  <p>Now imagine you’re navigating the streets of Toronto, trying to understand where bicycle thefts are happening. The interactive map below shows an overhead view with clusters of incidents marked by bright orange circles spread across the area of Toronto. Each circle represents a group of theft reports—smaller circles show fewer incidents, while larger ones stand out, marking areas with higher vulnerability. <a href="https://en.wikipedia.org/wiki/Downtown_Toronto" target="_blank" style="color: #FFC107; text-decoration: underline;">Downtown Toronto</a>, unsurprisingly, is covered by a massive bubble, indicating that this densely populated urban center has been most affected by bike thefts. As we drift north and away from the downtown core, the bubbles shrink, suggesting fewer incidents—likely due to the suburban nature of these areas, where bikes are stored more securely. And here's the interactive part—you can <strong style="color: #FFC107;">click</strong> on these bubbles to zoom in and explore specific areas, uncovering the exact locations and getting a more detailed sense of bike stolen cases. It's like having a personal guide leading you through the hot spots and quieter neighborhoods.</p>
</div>

<center>
```{r interactive_map, echo=FALSE, warning=FALSE, message=FALSE, results='asis', fig.width=7, fig.height=4.5}
#### Map with Markers ####

# Load your dataset
map_data <- read_csv(here("data", "map_by_neighbourhoods_data.csv"), show_col_types = FALSE)

# Modify the data frame, categorizing case_num column
map_data <- map_data %>% 
  mutate(
    mag.level = cut(case_num, c(100, 500, 1000, 1500),
                    labels = c('> 100 & <=500', '>500 & <=1000', '>1000 & <=1500'))
  ) %>%
  split(.$mag.level)

# Initialize the leaflet map
l <- leaflet() %>%
  addProviderTiles(providers$Esri.OceanBasemap)

# Add the markers to the map for each case_num level
names(map_data) %>%
  walk(function(df) {
    l <<- l %>% 
      addMarkers(
        data = map_data[[df]], lng = ~longitude, lat = ~latitude,
        label = ~paste0("Hood: ", hood_name, " | Stolen Place: ", stolen_place, " | Cost: ", cost, " | Status: ", status),
        popup = ~paste0(
          "Hood: ", hood_name, "<br>",
          "Stolen Place: ", stolen_place, "<br>",
          "Cost: ", cost, "<br>",
          "Status: ", status, "<br>",
          "Case in area: ", case_num
        ),
        group = df,
        clusterOptions = markerClusterOptions()
      )
  })

# Add layer controls and a minimap
l <- l %>%
  addLayersControl(
    overlayGroups = names(map_data),
    options = layersControlOptions(collapsed = FALSE)
  ) %>%
  addMiniMap(tiles = providers$Esri.OceanBasemap, width = 120, height = 80)

# Display the Map
l

```
</center>

<div style="color: grey; font-size: 12px; margin-top: 3px; max-width: 800px; margin: 0 auto;">
  Note: This interactive map reveals clusters of bicycle thefts across Toronto, clicking on each circle allows users to zoom in for detailed information on specific theft locations.
</div> \ 

<div class="main-body">
  <p>We then dive deeper into the city with a ground-level view — a sea of <strong style="color: #FFC107;">yellow</strong> dots each marks an individual theft incident(see "Map of Stolen Bike Cases in Toronto" below). The dots are packed tightly in certain neighborhoods, spreading across downtown Toronto like a thick yellow blanket. It paints a picture of the density of bike thefts—evidence that the busy central part of the city faces a higher risk. There’s a sharp concentration near transit hubs and popular neighborhoods, suggesting a correlation between foot traffic, bike use, and crime opportunity. Nevertheless, toronto has been making efforts to combat this issue; for example, Cycle Toronto launched the <a href="https://www.cycleto.ca/council-talking-about-ending-bike-theft-week" target="_blank" style="color: #FFC107; text-decoration: underline;">#EndBikeTheft campaign</a> (Cycle Toronto, 2021), advocating for secure parking and better registration systems, with city discussions exploring collaboration with platforms like <a href="https://project529.com/garage" style="color: #FFC107; text-decoration: underline;">529 Garage</a> (Project 529, 2024) to help reduce and recover stolen bikes.</p>
</div>

<center>
```{r map_of_stolen_bike, echo=FALSE, warning=FALSE, message=FALSE, results='asis', fig.width=8, fig.height=4}

# Load cleaned coordinates data
coordinates_data <- read.csv(here("data/cleaned_coordinates_data.csv"))

# Get bounding box for Toronto (approximate limits for Toronto)
toronto_bbox <- c(-79.6303856025883, 43.5822069220627, -79.1180336515019, 43.8554571861712)

# Fetch map data from OpenStreetMap (OSM)
toronto_map <- opq(bbox = toronto_bbox) %>%
  add_osm_feature(key = "highway", value = "primary") %>%
  add_osm_feature(key = 'highway', value = 'secondary') %>%
  add_osm_feature(key = 'highway', value = 'tertiary') %>%
  add_osm_feature(key = 'highway', value = 'residential') %>%
  osmdata_sf()

# Convert map data to Simple Features (sf) objects
streets <- toronto_map$osm_lines

# Plot the map with bike theft locations data
bike_theft_plot <- ggplot() +
  geom_sf(data = streets, color = "gray", size = 0.3, alpha = 0.6) + # OSM street map layer
  geom_point(
    data = coordinates_data, aes(x = longitude, y = latitude),
    size = 0.3, color = "#FFC107"
  ) + # Bike theft points
  labs(
    title = "Map of Stolen Bike Cases in Toronto",
    x = "Longitude", y = "Latitude"
  ) +
  coord_sf(
    xlim = c(-79.6303856025883, -79.1180336515019),
    ylim = c(43.5822069220627, 43.8554571861712), expand = FALSE
  ) +
  theme_minimal() +
  theme(
    panel.background = element_blank(), # Remove panel background
    panel.grid.major = element_blank(), # Remove major grid lines
    panel.grid.minor = element_blank(), # Remove minor grid lines
    axis.text.x = element_text(angle = 45, hjust = 1)
  )

bike_theft_plot

```
</center>

<div style="color: grey; font-size: 12px; margin-top: 3px; max-width: 800px; margin: 0 auto; text-align: center; display: flex; justify-content: center;">
  This map reveals a high concentration of bike theft incidents in downtown Toronto.
</div>

<div class="main-body">
  <p>The map below takes a step back to help us understand the data by neighborhood, but this time with a broader overview. It presents different regions in Toronto as bubbles of varying sizes and colors, indicating the number of thefts in each. The larger the bubble, the more incidents that have occurred there. One particular neighborhood stands out—a massive <strong style="color: #FFC107;">yellow</strong> circle in the downtown area—it visually reinforces what the other charts have hinted at: that specific neighborhoods, especially those near the core, are the epicenters of bicycle theft. In contrast, the areas with smaller circles seem barely affected, this highlights a clear divide in the city — some neighborhoods experience frequent theft activity, while others remain calm and safer.</p>
</div>

<center>
```{r map_case_number, echo=FALSE, warning=FALSE, message=FALSE, results='asis', fig.width=7, fig.height=4}
#### Map with Areas ####

# Load your dataset (adjust the file path accordingly)
map_data <- read_csv(here("data", "map_by_area_data.csv"), show_col_types = FALSE)

# Get bounding box for Toronto (approximate limits for Toronto)
toronto_bbox <- c(-79.6303856025883, 43.5822069220627, -79.1180336515019, 43.8554571861712)

# Fetch map data from OpenStreetMap (OSM)
toronto_map <- opq(bbox = toronto_bbox) %>%
  add_osm_feature(key = "boundary", value = "administrative") %>%
  osmdata_sf()

# Convert map data to Simple Features (sf) objects
streets <- toronto_map$osm_lines

# Generate a similar plot using ggplot2 and plotly
shared_data <- crosstalk::SharedData$new(map_data)

# Define more detailed breaks for color scale based on `case_num`
max_case_num <- max(map_data$case_num, na.rm = TRUE)
color_breaks <- seq(0, max_case_num, by = max_case_num / 4)

# Create a rounding function to simplify the labels
rounded_labels <- function(x) scales::comma(round(x, -6))

# Create ggplot object with the dataset and Toronto map as a background
ggplot_map <- ggplot() +
  geom_sf(data = streets, color = "lightgray", size = 0.3, alpha = 0.6) +  # Add OSM street map layer
  geom_point(data = shared_data, aes(x = longitude, y = latitude, color = case_num, size = case_num, 
                                     text = paste("Total Cases: ", case_num, " | Area Name: ", area_name))) +
  coord_sf(
    xlim = c(-79.6303856025883, -79.1180336515019),
    ylim = c(43.5822069220627, 43.8554571861712), expand = FALSE
  ) +
  theme_minimal() +
  labs(title = "Toronto Stolen Bike Case Numbers by Area", x = "Longitude", y = "Latitude", color = "Number of Cases", size = "Total Cases") +
  theme(
    panel.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1)
  ) +
  scale_color_gradientn(colors = c("#603601", "#FFC107"), breaks = color_breaks, labels = rounded_labels) +
  scale_size_continuous(range = c(3, 12))

# Convert ggplot object to interactive plotly object
plotly_map <- ggplotly(ggplot_map, tooltip = "text") %>%
  highlight(
    on = "plotly_hover",
    off = "plotly_doubleclick",
    selected = attrs_selected(line = list(color = "black"))
  )

plotly_map
```
</center>

<div style="color: grey; font-size: 12px; margin-top: 3px; max-width: 800px; margin: 0 auto;">
  Note: The size of each point is proportional to the number of cases reported in each area, highlighting hotspots like downtown and other major regions. By clicking on each point, number of totals cases will be shown for different areas, including Downtown, Etobicoke, York, East York, North York, and Scarborough.
</div> \ 

<div class="section-heading">
  <span class="section-title-line1">Putting it All Together</span><br>
</div>

<div class="main-body">
  <p>In this article, we began by examining when bikes are at the greatest risk of theft, revealing a strong seasonal trend with thefts peaking in the summer months from <strong style="color: #FFC107;">May</strong> to <strong style="color: #FFC107;">August</strong> and notable increase on <strong style="color: #FFC107;">Fridays</strong>. These insights provided a foundation for understanding the timing of bike thefts. Next, we looked into bike recovery rates, which showed a significant gap between the number of bikes stolen and those successfully recovered, highlighting the challenges in returning stolen bikes to their owners. This aspect underscored systemic issues in recovery efforts and the need for improved tracking systems.</p>

<p>We also explored geographical patterns, identifying hotspots such as downtown Toronto and major transit hubs where bike thefts are most concentrated. Through mapping, we provided a visual representation of high-risk areas, guiding cyclists and policymakers on where extra security measures are most needed.</p>

<p>Together, these visualizations connect to form a comprehensive view of Toronto’s bike theft landscape. They reveal the when, where, and why of bike theft, offering insights that can inform future actions. Moving forward, Toronto can strengthen its approach by expanding secure bike parking options, increasing partnerships with bike registration platforms like Project 529, and deploying targeted initiatives like Project Sentry in high-theft areas. Future studies could extend this analysis to examine bike theft patterns across Canada, providing a nationwide perspective on hotspots and seasonal trends. By combining these efforts, city authorities, advocacy groups, and cyclists themselves can work together to create a <strong style="color: #FFC107;">safer</strong> environment for biking across Toronto.</p>
</div>

<div class="section-heading">
  <span class="section-title-line1">Conclusion</span><br>
</div>

<div class="main-body">
  <p>**This article is a reminder**: as cycling grows in popularity, so does the risk of <strong style="color: #FFC107;">theft</strong>. Whether you’re a daily commuter or a weekend rider, taking extra precautions—like using a sturdy lock, parking in well-lit areas, and registering your bike—can make a big difference. <strong style="color: #FFC107;">Protect</strong> your bike, and keep Toronto’s cycling community rolling safely all year round!</p>
</div>

<div class="section-heading">
  <span class="section-title-line1"></span><br>
</div>

<div class='citation-section'>
  <h3>References</h3>
  <ul>
    <li>Bike Month. (2024). <i>Bike Month Toronto.</i> <a href='https://www.bikemonth.ca/toronto'>https://www.bikemonth.ca/toronto</a></li>
    <li>City of Toronto. (2019). <i>2019 cycling public opinion survey.</i> <a href='https://www.toronto.ca/wp-content/uploads/2021/04/8f76-2019-Cycling-Public-Option-Survey-City-of-Toronto-Cycling.pdf'>https://www.toronto.ca/wp-content/uploads/2021/04/8f76-2019-Cycling-Public-Option-Survey-City-of-Toronto-Cycling.pdf</a></li>
    <li>City of Toronto. (2024). <i>Bicycle parking.</i> <a href='https://www.toronto.ca/services-payments/streets-parking-transportation/cycling-in-toronto/bicycle-parking/'>https://www.toronto.ca/services-payments/streets-parking-transportation/cycling-in-toronto/bicycle-parking/</a></li>
    <li>CTV News. (2024). Should Toronto tear up its bike lanes to improve traffic flow? Critics say it’s not so simple. <i>CTV News.</i> <a href='https://www.ctvnews.ca/canada/should-toronto-tear-up-its-bike-lanes-to-improve-traffic-flow-critics-say-it-s-not-so-simple-1.7103768'>https://www.ctvnews.ca/canada/should-toronto-tear-up-its-bike-lanes-to-improve-traffic-flow-critics-say-it-s-not-so-simple-1.7103768</a></li>
    <li>Cycle Toronto. (2021). Council talking about ending bike theft week. <i>Cycle Toronto.</i> <a href='https://www.cycleto.ca/council-talking-about-ending-bike-theft-week'>https://www.cycleto.ca/council-talking-about-ending-bike-theft-week</a></li>
    <li>Project 529. (2024). <i>529 garage: Bike registration to reduce theft and help recovery.</i> <a href='https://project529.com/garage'>https://project529.com/garage</a></li>
    <li>Shapiro, A. (2021). Bike thieves are on a roll during the pandemic. Here’s how to protect your ride. <i>NPR.</i> <a href='https://www.npr.org/2021/04/02/980008727/bike-thieves-are-on-a-roll-during-the-pandemic-heres-how-to-protect-your-ride'>https://www.npr.org/2021/04/02/980008727/bike-thieves-are-on-a-roll-during-the-pandemic-heres-how-to-protect-your-ride</a></li>
    <li>Toronto Police Service. (2024a). <i>Bicycle registration.</i> <a href='https://www.tps.ca/services/bicycle-registration/'>https://www.tps.ca/services/bicycle-registration/</a></li>
    <li>Toronto Police Service. (2024b). <i>Bicycle safety & theft prevention.</i> <a href='https://www.tps.ca/crime-prevention/bicycle-safety-and-theft-prevention/'>https://www.tps.ca/crime-prevention/bicycle-safety-and-theft-prevention/</a></li>
    <li>Toronto Police Service. (2024c). <i>Bicycle thefts open data.</i> <a href='https://data.torontopolice.on.ca/datasets/TorontoPS::bicycle-thefts-open-data/about'>https://data.torontopolice.on.ca/datasets/TorontoPS::bicycle-thefts-open-data/about</a></li>
    <li>Toronto Police Service. (2024d). Project Sentry: Keeping Toronto safe. <i>Toronto Police Service.</i> <a href='https://www.tps.ca/media-centre/news-releases/fix-title-project-sentry/'>https://www.tps.ca/media-centre/news-releases/fix-title-project-sentry/</a></li>
  </ul>
</div>
